let money = 20020.04;
let production = 16;
let upgradeCost = 183;

const maxOfflineHours = 2;

function formatMoney(value) {
    return value.toFixed(2);
}

function updateUI() {
    document.getElementById("money").innerText = formatMoney(money);
    document.getElementById("production").innerText = production.toFixed(2);
    document.getElementById("upgradeCost").innerText = Math.floor(upgradeCost);
}

function produce() {
    money += 1;
    updateUI();
}

function upgrade() {
    if (money >= upgradeCost) {
        money -= upgradeCost;

        // Crescimento estratégico
        production += 0.8;

        // Custo cresce forte (progressivo)
        upgradeCost *= 1.85;

        updateUI();
    }
}

// Produção automática mais controlada
setInterval(() => {
    money += production * 0.35;
    updateUI();
}, 1000);

// Sistema Offline
window.onload = function () {
    const lastTime = localStorage.getItem("lastTime");

    if (lastTime) {
        const now = Date.now();
        const diff = (now - lastTime) / 1000;
        const maxOfflineSeconds = maxOfflineHours * 3600;

        const offlineTime = Math.min(diff, maxOfflineSeconds);

        money += production * 0.35 * offlineTime;
    }

    updateUI();
};

window.onbeforeunload = function () {
    localStorage.setItem("lastTime", Date.now());
};
